export const wxRequest = (options, loading = true) => {
    return new Promise((resolve, reject) => {
        const { url } = options;
        if (!url) {
            reject({
                errMsg: '未定义 url'
            });
        }
        const realUrl = url.startsWith("http") ? url : getApp().globalData.baseUrl + url;
        if (loading) {
            wx.showLoading({
                title: '加载中',
            });
        }
        wx.request({
            header: { 'Content-Type': 'application/json' },
            ...options,
            url: realUrl,
            success: function (res) {
                if (loading) {
                    wx.hideLoading();
                }
                resolve(res);
            },
            fail: function (res) {
                if (loading) {
                    wx.hideLoading();
                }
                reject(res);
            }
        });
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlcXVlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFHLENBQUMsT0FBWSxFQUFFLFVBQW1CLElBQUksRUFBRSxFQUFFO0lBQ2pFLE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFpRCxFQUFFLE1BQTZDLEVBQUUsRUFBRTtRQUN0SCxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsT0FBTyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDUixNQUFNLENBQUM7Z0JBQ0wsTUFBTSxFQUFFLFNBQVM7YUFDbEIsQ0FBQyxDQUFBO1NBQ0g7UUFDRCxNQUFNLE9BQU8sR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBYSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDO1FBQzVGLElBQUcsT0FBTyxFQUFFO1lBQ1YsRUFBRSxDQUFDLFdBQVcsQ0FBQztnQkFDYixLQUFLLEVBQUUsS0FBSzthQUNiLENBQUMsQ0FBQztTQUNKO1FBQ0QsRUFBRSxDQUFDLE9BQU8sQ0FBQztZQUNULE1BQU0sRUFBRSxFQUFFLGNBQWMsRUFBRSxrQkFBa0IsRUFBRTtZQUM5QyxHQUFHLE9BQU87WUFDVixHQUFHLEVBQUUsT0FBTztZQUNaLE9BQU8sRUFBRSxVQUFVLEdBQUc7Z0JBQ3BCLElBQUcsT0FBTyxFQUFFO29CQUNWLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztpQkFDbEI7Z0JBQ0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2YsQ0FBQztZQUNELElBQUksRUFBRSxVQUFVLEdBQUc7Z0JBQ2pCLElBQUcsT0FBTyxFQUFFO29CQUNWLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztpQkFDbEI7Z0JBQ0QsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2QsQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHd4UmVxdWVzdCA9IChvcHRpb25zOiBhbnksIGxvYWRpbmc6IGJvb2xlYW4gPSB0cnVlKSA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZTogV2VjaGF0TWluaXByb2dyYW0uUmVxdWVzdFN1Y2Nlc3NDYWxsYmFjaywgcmVqZWN0OiBXZWNoYXRNaW5pcHJvZ3JhbS5SZXF1ZXN0RmFpbENhbGxiYWNrKSA9PiB7XG4gICAgY29uc3QgeyB1cmwgfSA9IG9wdGlvbnM7XG4gICAgaWYgKCF1cmwpIHtcbiAgICAgIHJlamVjdCh7XG4gICAgICAgIGVyck1zZzogJ+acquWumuS5iSB1cmwnXG4gICAgICB9KVxuICAgIH1cbiAgICBjb25zdCByZWFsVXJsID0gdXJsLnN0YXJ0c1dpdGgoXCJodHRwXCIpID8gdXJsIDogZ2V0QXBwPEJwbU9wdGlvbj4oKS5nbG9iYWxEYXRhLmJhc2VVcmwgKyB1cmw7XG4gICAgaWYobG9hZGluZykge1xuICAgICAgd3guc2hvd0xvYWRpbmcoe1xuICAgICAgICB0aXRsZTogJ+WKoOi9veS4rScsXG4gICAgICB9KTtcbiAgICB9XG4gICAgd3gucmVxdWVzdCh7XG4gICAgICBoZWFkZXI6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHVybDogcmVhbFVybCxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgaWYobG9hZGluZykge1xuICAgICAgICAgIHd4LmhpZGVMb2FkaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgfSxcbiAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgaWYobG9hZGluZykge1xuICAgICAgICAgIHd4LmhpZGVMb2FkaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KHJlcyk7XG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0iXX0=