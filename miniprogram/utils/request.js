export const wxRequest = (options) => {
    return new Promise((resolve, reject) => {
        const { url } = options;
        if (!url) {
            reject({
                errMsg: '未定义 url'
            });
        }
        const realUrl = url.startsWith("http") ? url : getApp().globalData.baseUrl + url;
        wx.showLoading({
            title: '加载中',
        });
        wx.request({
            header: { 'Content-Type': 'application/json' },
            ...options,
            url: realUrl,
            success: function (res) {
                wx.hideLoading();
                resolve(res);
            },
            fail: function (res) {
                wx.hideLoading();
                reject(res);
            }
        });
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlcXVlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFHLENBQUMsT0FBWSxFQUFFLEVBQUU7SUFDeEMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQWlELEVBQUUsTUFBNkMsRUFBRSxFQUFFO1FBQ3RILE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxPQUFPLENBQUM7UUFDeEIsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNSLE1BQU0sQ0FBQztnQkFDTCxNQUFNLEVBQUUsU0FBUzthQUNsQixDQUFDLENBQUE7U0FDSDtRQUNELE1BQU0sT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFhLENBQUMsVUFBVSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7UUFDNUYsRUFBRSxDQUFDLFdBQVcsQ0FBQztZQUNiLEtBQUssRUFBRSxLQUFLO1NBQ2IsQ0FBQyxDQUFDO1FBQ0gsRUFBRSxDQUFDLE9BQU8sQ0FBQztZQUNULE1BQU0sRUFBRSxFQUFFLGNBQWMsRUFBRSxrQkFBa0IsRUFBRTtZQUM5QyxHQUFHLE9BQU87WUFDVixHQUFHLEVBQUUsT0FBTztZQUNaLE9BQU8sRUFBRSxVQUFVLEdBQUc7Z0JBQ3BCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2YsQ0FBQztZQUNELElBQUksRUFBRSxVQUFVLEdBQUc7Z0JBQ2pCLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDakIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ2QsQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHd4UmVxdWVzdCA9IChvcHRpb25zOiBhbnkpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlOiBXZWNoYXRNaW5pcHJvZ3JhbS5SZXF1ZXN0U3VjY2Vzc0NhbGxiYWNrLCByZWplY3Q6IFdlY2hhdE1pbmlwcm9ncmFtLlJlcXVlc3RGYWlsQ2FsbGJhY2spID0+IHtcbiAgICBjb25zdCB7IHVybCB9ID0gb3B0aW9ucztcbiAgICBpZiAoIXVybCkge1xuICAgICAgcmVqZWN0KHtcbiAgICAgICAgZXJyTXNnOiAn5pyq5a6a5LmJIHVybCdcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHJlYWxVcmwgPSB1cmwuc3RhcnRzV2l0aChcImh0dHBcIikgPyB1cmwgOiBnZXRBcHA8QnBtT3B0aW9uPigpLmdsb2JhbERhdGEuYmFzZVVybCArIHVybDtcbiAgICB3eC5zaG93TG9hZGluZyh7XG4gICAgICB0aXRsZTogJ+WKoOi9veS4rScsXG4gICAgfSk7XG4gICAgd3gucmVxdWVzdCh7XG4gICAgICBoZWFkZXI6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHVybDogcmVhbFVybCxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgd3guaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgfSxcbiAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgd3guaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgcmVqZWN0KHJlcyk7XG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0iXX0=