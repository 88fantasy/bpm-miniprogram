import { wxRequest } from '../../utils/request';
Page({
    app: getApp(),
    data: {
        name: "姓名",
        uaccount: "工号",
        catelogs: []
    },
    onLogout() {
        wx.redirectTo({
            url: '/pages/index/index'
        });
    },
    onLoad() {
        const { app } = this;
        const that = this;
        const uaccount = app.globalData.accountInfo?.uaccount;
        if (uaccount) {
            wxRequest({
                url: `https://auth.gzmpc.com/sso/webapi/account/load?uaccount=${uaccount}`,
            }).then((res) => {
                if (res.statusCode == 200) {
                    const data = res.data;
                    if (data && data.status == 200) {
                        that.setData({
                            name: data.data.accountname
                        });
                    }
                }
            });
        }
        this.setData({
            uaccount,
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGFzaGJvYXJkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGFzaGJvYXJkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUdoRCxJQUFJLENBQUM7SUFDSCxHQUFHLEVBQUUsTUFBTSxFQUFhO0lBQ3hCLElBQUksRUFBRTtRQUNKLElBQUksRUFBRSxJQUFJO1FBQ1YsUUFBUSxFQUFFLElBQUk7UUFDZCxRQUFRLEVBQUMsRUFBRTtLQUNaO0lBRUQsUUFBUTtRQUlGLEVBQUUsQ0FBQyxVQUFVLENBQUM7WUFDWixHQUFHLEVBQUUsb0JBQW9CO1NBQzFCLENBQUMsQ0FBQztJQUlULENBQUM7SUFFRCxNQUFNO1FBQ0osTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztRQUNyQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUM7UUFFbEIsTUFBTSxRQUFRLEdBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDO1FBQ3JELElBQUcsUUFBUSxFQUFFO1lBQ1gsU0FBUyxDQUFDO2dCQUNSLEdBQUcsRUFBRSwyREFBMkQsUUFBUSxFQUFFO2FBQzNFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDZCxJQUFHLEdBQUcsQ0FBQyxVQUFVLElBQUksR0FBRyxFQUFFO29CQUN4QixNQUFNLElBQUksR0FBUSxHQUFHLENBQUMsSUFBSSxDQUFDO29CQUMzQixJQUFHLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLEdBQUcsRUFBRTt3QkFDN0IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs0QkFDWCxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXO3lCQUM1QixDQUFDLENBQUM7cUJBQ0o7aUJBQ0Y7WUFDSCxDQUFDLENBQUMsQ0FBQztTQUNKO1FBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFFBQVE7U0FDVCxDQUFDLENBQUM7SUFFTCxDQUFDO0NBRUYsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGFzaGJvYXJkLnRzXG5pbXBvcnQgeyB3eFJlcXVlc3QgfSBmcm9tICcuLi8uLi91dGlscy9yZXF1ZXN0Jztcbi8vIGltcG9ydCB7IENPTlNUQU5UX1NFU1NJT05EQVRBX0tFWSAgfSBmcm9tICcuLi8uLi91dGlscy9jb25zdGFudCc7XG5cblBhZ2Uoe1xuICBhcHA6IGdldEFwcDxCcG1PcHRpb24+KCksXG4gIGRhdGE6IHtcbiAgICBuYW1lOiBcIuWnk+WQjVwiLFxuICAgIHVhY2NvdW50OiBcIuW3peWPt1wiLFxuICAgIGNhdGVsb2dzOltdXG4gIH0sXG5cbiAgb25Mb2dvdXQoKSB7XG4gICAgLy8gd3gucmVtb3ZlU3RvcmFnZSh7XG4gICAgLy8gICBrZXk6IENPTlNUQU5UX1NFU1NJT05EQVRBX0tFWSxcbiAgICAvLyAgIHN1Y2Nlc3MgKCkge1xuICAgICAgICB3eC5yZWRpcmVjdFRvKHtcbiAgICAgICAgICB1cmw6ICcvcGFnZXMvaW5kZXgvaW5kZXgnXG4gICAgICAgIH0pO1xuICAgICAgLy8gfVxuICAgIC8vIH0pXG4gICAgXG4gIH0sXG4gICBcbiAgb25Mb2FkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB0aGlzO1xuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuXG4gICAgY29uc3QgdWFjY291bnQ9IGFwcC5nbG9iYWxEYXRhLmFjY291bnRJbmZvPy51YWNjb3VudDtcbiAgICBpZih1YWNjb3VudCkge1xuICAgICAgd3hSZXF1ZXN0KHtcbiAgICAgICAgdXJsOiBgaHR0cHM6Ly9hdXRoLmd6bXBjLmNvbS9zc28vd2ViYXBpL2FjY291bnQvbG9hZD91YWNjb3VudD0ke3VhY2NvdW50fWAsXG4gICAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYocmVzLnN0YXR1c0NvZGUgPT0gMjAwKSB7XG4gICAgICAgICAgY29uc3QgZGF0YTphbnkgID0gcmVzLmRhdGE7XG4gICAgICAgICAgaWYoZGF0YSAmJiBkYXRhLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XG4gICAgICAgICAgICAgIG5hbWU6IGRhdGEuZGF0YS5hY2NvdW50bmFtZVxuICAgICAgICAgICAgfSk7IFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXREYXRhKHtcbiAgICAgIHVhY2NvdW50LFxuICAgIH0pO1xuICAgIFxuICB9LFxuICBcbn0pIl19