import { wxRequest } from '../../utils/request';
Page({
    app: getApp(),
    data: {
        name: "姓名",
        uaccount: "工号",
        catelogs: [],
        changeLogs: [{
                text: 'OA审批操作支持选择节点',
                desc: '2020-10-11',
            }, {
                text: '支持审批操作',
                desc: '2020-10-07',
            }, {
                text: '支持绑定后自动登陆',
                desc: '2020-10-05',
            }, {
                text: '初始版本上线',
                desc: '2020-10-03',
            }],
    },
    onLogout() {
        wx.reLaunch({
            url: '/pages/index/index?auto=false'
        });
    },
    onLoad() {
        const { app } = this;
        const that = this;
        const uaccount = app.globalData.accountInfo?.uaccount;
        if (uaccount) {
            wxRequest({
                url: `https://auth.gzmpc.com/sso/webapi/account/load?uaccount=${uaccount}`,
            }).then((res) => {
                if (res.statusCode == 200) {
                    const data = res.data;
                    if (data && data.status == 200) {
                        that.setData({
                            name: data.data.accountname
                        });
                    }
                }
            });
        }
        this.setData({
            uaccount,
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGFzaGJvYXJkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGFzaGJvYXJkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUdoRCxJQUFJLENBQUM7SUFDSCxHQUFHLEVBQUUsTUFBTSxFQUFhO0lBQ3hCLElBQUksRUFBRTtRQUNKLElBQUksRUFBRSxJQUFJO1FBQ1YsUUFBUSxFQUFFLElBQUk7UUFDZCxRQUFRLEVBQUMsRUFBRTtRQUNYLFVBQVUsRUFBRSxDQUFDO2dCQUNYLElBQUksRUFBRSxjQUFjO2dCQUNwQixJQUFJLEVBQUUsWUFBWTthQUNuQixFQUFDO2dCQUNBLElBQUksRUFBRSxRQUFRO2dCQUNkLElBQUksRUFBRSxZQUFZO2FBQ25CLEVBQUM7Z0JBQ0EsSUFBSSxFQUFFLFdBQVc7Z0JBQ2pCLElBQUksRUFBRSxZQUFZO2FBQ25CLEVBQUM7Z0JBQ0EsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsSUFBSSxFQUFFLFlBQVk7YUFDbkIsQ0FBQztLQUNIO0lBRUQsUUFBUTtRQUlGLEVBQUUsQ0FBQyxRQUFRLENBQUM7WUFDVixHQUFHLEVBQUUsK0JBQStCO1NBQ3JDLENBQUMsQ0FBQztJQUlULENBQUM7SUFFRCxNQUFNO1FBQ0osTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztRQUNyQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUM7UUFFbEIsTUFBTSxRQUFRLEdBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDO1FBQ3JELElBQUcsUUFBUSxFQUFFO1lBQ1gsU0FBUyxDQUFDO2dCQUNSLEdBQUcsRUFBRSwyREFBMkQsUUFBUSxFQUFFO2FBQzNFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDZCxJQUFHLEdBQUcsQ0FBQyxVQUFVLElBQUksR0FBRyxFQUFFO29CQUN4QixNQUFNLElBQUksR0FBUSxHQUFHLENBQUMsSUFBSSxDQUFDO29CQUMzQixJQUFHLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLEdBQUcsRUFBRTt3QkFDN0IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs0QkFDWCxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXO3lCQUM1QixDQUFDLENBQUM7cUJBQ0o7aUJBQ0Y7WUFDSCxDQUFDLENBQUMsQ0FBQztTQUNKO1FBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFFBQVE7U0FDVCxDQUFDLENBQUM7SUFFTCxDQUFDO0NBRUYsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGFzaGJvYXJkLnRzXG5pbXBvcnQgeyB3eFJlcXVlc3QgfSBmcm9tICcuLi8uLi91dGlscy9yZXF1ZXN0Jztcbi8vIGltcG9ydCB7IENPTlNUQU5UX1NFU1NJT05EQVRBX0tFWSAgfSBmcm9tICcuLi8uLi91dGlscy9jb25zdGFudCc7XG5cblBhZ2Uoe1xuICBhcHA6IGdldEFwcDxCcG1PcHRpb24+KCksXG4gIGRhdGE6IHtcbiAgICBuYW1lOiBcIuWnk+WQjVwiLFxuICAgIHVhY2NvdW50OiBcIuW3peWPt1wiLFxuICAgIGNhdGVsb2dzOltdLFxuICAgIGNoYW5nZUxvZ3M6IFt7XG4gICAgICB0ZXh0OiAnT0HlrqHmibnmk43kvZzmlK/mjIHpgInmi6noioLngrknLFxuICAgICAgZGVzYzogJzIwMjAtMTAtMTEnLFxuICAgIH0se1xuICAgICAgdGV4dDogJ+aUr+aMgeWuoeaJueaTjeS9nCcsXG4gICAgICBkZXNjOiAnMjAyMC0xMC0wNycsXG4gICAgfSx7XG4gICAgICB0ZXh0OiAn5pSv5oyB57uR5a6a5ZCO6Ieq5Yqo55m76ZmGJyxcbiAgICAgIGRlc2M6ICcyMDIwLTEwLTA1JyxcbiAgICB9LHtcbiAgICAgIHRleHQ6ICfliJ3lp4vniYjmnKzkuIrnur8nLFxuICAgICAgZGVzYzogJzIwMjAtMTAtMDMnLFxuICAgIH1dLFxuICB9LFxuXG4gIG9uTG9nb3V0KCkge1xuICAgIC8vIHd4LnJlbW92ZVN0b3JhZ2Uoe1xuICAgIC8vICAga2V5OiBDT05TVEFOVF9TRVNTSU9OREFUQV9LRVksXG4gICAgLy8gICBzdWNjZXNzICgpIHtcbiAgICAgICAgd3gucmVMYXVuY2goe1xuICAgICAgICAgIHVybDogJy9wYWdlcy9pbmRleC9pbmRleD9hdXRvPWZhbHNlJ1xuICAgICAgICB9KTtcbiAgICAgIC8vIH1cbiAgICAvLyB9KVxuICAgIFxuICB9LFxuICAgXG4gIG9uTG9hZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gdGhpcztcbiAgICBjb25zdCB0aGF0ID0gdGhpcztcblxuICAgIGNvbnN0IHVhY2NvdW50PSBhcHAuZ2xvYmFsRGF0YS5hY2NvdW50SW5mbz8udWFjY291bnQ7XG4gICAgaWYodWFjY291bnQpIHtcbiAgICAgIHd4UmVxdWVzdCh7XG4gICAgICAgIHVybDogYGh0dHBzOi8vYXV0aC5nem1wYy5jb20vc3NvL3dlYmFwaS9hY2NvdW50L2xvYWQ/dWFjY291bnQ9JHt1YWNjb3VudH1gLFxuICAgICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmKHJlcy5zdGF0dXNDb2RlID09IDIwMCkge1xuICAgICAgICAgIGNvbnN0IGRhdGE6YW55ICA9IHJlcy5kYXRhO1xuICAgICAgICAgIGlmKGRhdGEgJiYgZGF0YS5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICAgICAgICB0aGF0LnNldERhdGEoe1xuICAgICAgICAgICAgICBuYW1lOiBkYXRhLmRhdGEuYWNjb3VudG5hbWVcbiAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0RGF0YSh7XG4gICAgICB1YWNjb3VudCxcbiAgICB9KTtcbiAgICBcbiAgfSxcbiAgXG59KSJdfQ==